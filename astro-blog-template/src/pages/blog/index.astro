---
import Layout from "../../layouts/Layout.astro";
import Hero from "../../components/sections/Hero.astro";
import BlogImage from "../../assets/blog-image.webp";
import PostCard from "../../components/blog/PostCard.astro";
import SearchIsland from "../../components/islands/SearchIsland.tsx";
import { getCollection } from "astro:content";
const title = "Bienvenidos a nuestro blog.";
const description =
  "Bienvenidos a nuestro blog donde compartimos artÃ­culos sobre desarrollo web, Astro y mÃ¡s.";
const posts = await getCollection("posts");
const searchData = posts.map((p: any) => ({
  title: String(p.data.title ?? ""),
  description: String(p.data.description ?? ""),
  slug: String(p.slug ?? ""),
}));
const sortedPosts = posts.sort(
  (a: any, b: any) => b.data.date.getTime() - a.data.date.getTime(),
);
---

<Layout title={title} description={description}>
  <main role="main" class="max-w-6xl mx-auto">
    <Hero
      image={BlogImage}
      className="w-60"
      title="Welcome to our blog."
      subtitle="Explore our latest articles on programming, web development, new technologies, and much more."
    />
    <SearchIsland client:load data={searchData} />
    <section class="mx-auto max-w-7xl py-10 pt-5 max-2xl:px-0 max-xl:px-4 max-md:px-4 max-lg:px-4 max-sm:px-4">
      <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3">
        {
          sortedPosts.map((post:any) => (
            <PostCard slug={post.slug} {...post.data} />
          ))
        }
      </div>
    </section>
  </main>
</Layout>
